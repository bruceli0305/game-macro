# 游戏宏 - AutoHotkey 自动化工具

一个基于 AutoHotkey v2 开发的游戏自动化工具，支持像素检测、技能循环、BUFF计时等高级功能。

## 功能特性

### 🎯 核心功能
- **像素检测**：通过屏幕像素颜色检测技能冷却状态
- **多线程支持**：支持多个独立的技能执行线程
- **智能避让**：鼠标取色时自动避让，避免干扰游戏操作
- **规则引擎**：基于条件的自动化规则系统
- **BUFF计时器**：自动续BUFF功能
- **自动化页面**：完整的线程、BUFF、规则和循环管理界面
- **实时监控**：实时状态监控，包含摘要页面和详细列表

### 🛠️ 配置管理
- **多角色配置**：支持多个游戏角色的独立配置
- **可视化编辑**：图形界面配置技能、点位和规则
- **配置导出**：可将配置打包为独立脚本
- **国际化支持**：多语言界面（英文和中文）
- **模块化架构**：组织良好的代码结构，便于维护和扩展

## 快速开始

### 系统要求
- Windows 操作系统
- AutoHotkey v2.0 或更高版本

### 安装步骤
1. 下载并安装 [AutoHotkey v2](https://www.autohotkey.com/)
2. 克隆或下载本项目到本地
3. 双击运行 `Main.ahk` 启动配置工具

### 基本使用
1. **启动工具**：运行 `Main.ahk` 打开配置界面
2. **创建配置**：点击"新建"创建角色配置
3. **配置技能**：在"技能列表"标签页添加技能
4. **设置热键**：配置开始/停止热键（默认 F9）
5. **保存配置**：点击"保存配置"按钮
6. **开始使用**：在游戏中按热键启动宏

## 详细配置

### 技能配置
每个技能包含以下参数：
- **技能名**：自定义名称
- **键位**：游戏中的技能快捷键
- **坐标**：技能图标在屏幕上的位置
- **颜色**：技能冷却完成时的像素颜色
- **容差**：颜色匹配的容差范围

### 点位配置
独立的取色点位，可用于检测游戏状态：
- **名称**：点位描述
- **坐标**：屏幕坐标
- **颜色**：预期颜色值
- **容差**：颜色匹配容差

### 规则系统
基于条件的自动化规则：
- **条件**：像素检测、计数器等条件判断
- **动作**：执行技能、延迟等操作
- **线程**：指定执行线程
- **优先级**：规则执行优先级

### BUFF计时器
自动续BUFF功能：
- **BUFF名称**：自定义名称
- **持续时间**：BUFF持续时间（毫秒）
- **提前刷新**：提前刷新时间
- **关联技能**：用于续BUFF的技能

## 项目结构

```
game-macro/
├── Main.ahk                    # 主程序入口
├── Config/                     # 应用配置
│   └── AppConfig.ini          # 主配置文件
├── Languages/                  # 国际化文件
│   ├── en-US.ini              # 英文语言包
│   └── zh-CN.ini              # 中文语言包
├── modules/                    # 功能模块
│   ├── GUI_Main.ahk           # 主界面
│   ├── core/                   # 核心功能模块
│   │   ├── AppConfig.ahk      # 配置管理
│   │   └── Core.ahk           # 核心系统功能
│   ├── engines/                # 引擎模块
│   │   ├── BuffEngine.ahk     # BUFF管理引擎
│   │   ├── Pixel.ahk          # 像素检测引擎
│   │   └── RuleEngine.ahk     # 规则处理引擎
│   ├── runtime/                # 运行时模块
│   │   ├── Counters.ahk       # 计数器管理
│   │   ├── Hotkeys.ahk        # 热键处理
│   │   └── Poller.ahk          # 轮询系统
│   ├── storage/                # 存储模块
│   │   ├── Exporter.ahk       # 配置导出
│   │   └── Storage.ahk        # 数据存储
│   ├── ui/                     # 用户界面模块
│   │   ├── UI_Framework.ahk    # UI框架和页面管理
│   │   ├── UI_Layout.ahk      # 布局管理
│   │   ├── UI_Shell.ahk       # 外壳界面
│   │   ├── dialogs/           # 对话框组件
│   │   │   ├── GUI_BuffEditor.ahk      # BUFF编辑器对话框
│   │   │   ├── GUI_PointEditor.ahk    # 坐标点编辑器对话框
│   │   │   ├── GUI_RuleEditor.ahk      # 规则编辑器对话框
│   │   │   ├── GUI_SkillEditor.ahk     # 技能编辑器对话框
│   │   │   ├── GUI_Threads.ahk         # 线程管理器对话框
│   │   │   └── UI_DefaultSkillDlg.ahk  # 默认技能对话框
│   │   ├── pages/             # 页面组件
│   │   │   ├── automation/            # 自动化管理页面
│   │   │   │   ├── Page_Buffs_Summary.ahk    # BUFF摘要页面
│   │   │   │   ├── Page_Rules_Summary.ahk    # 规则摘要页面
│   │   │   │   └── Page_Threads_Summary.ahk  # 线程摘要页面
│   │   │   ├── UI_Page_Config.ahk      # 配置页面
│   │   │   └── UI_Page_Settings.ahk    # 设置页面
│   │   └── rotation/           # 循环编辑器组件
│   │       ├── RE_UI_Common.ahk         # 通用循环UI
│   │       ├── RE_UI_Page_Gates.ahk    # 门控页面
│   │       ├── RE_UI_Page_General.ahk  # 通用页面
│   │       ├── RE_UI_Page_Opener.ahk  # 开场页面
│   │       ├── RE_UI_Page_Tracks.ahk   # 轨道页面
│   │       └── RE_UI_Shell.ahk          # 循环外壳
│   ├── util/                   # 工具模块
│   │   └── Utils.ahk           # 工具函数
│   ├── workers/                # 工作模块
│   │   ├── WorkerHost.ahk     # 工作主机管理
│   │   └── WorkerPool.ahk     # 工作池管理
│   └── i18n/                   # 国际化
│       └── Lang.ahk            # 语言管理
├── Profiles/                   # 角色配置文件目录
│   ├── Default.ini            # 默认配置
│   ├── 夺魂.ini               # 示例配置
│   └── 裁决.ini               # 示例配置
├── Exports/                    # 导出目录
│   └── 夺魂/                   # 示例导出配置
└── Logs/                       # 日志目录
```

## 使用示例

### 基本技能循环
1. 添加需要循环使用的技能
2. 设置技能检测坐标和颜色
3. 配置轮询间隔（默认25ms）
4. 设置全局延迟防止技能刷屏

### 条件触发规则
1. 创建规则并设置条件
2. 配置条件满足时的动作
3. 设置规则优先级和冷却时间
4. 指定执行线程

### BUFF自动续费
1. 添加BUFF计时器
2. 设置BUFF持续时间和提前刷新时间
3. 关联续BUFF的技能
4. 配置检测条件

## 注意事项

### ⚠️ 重要提醒
- 本工具仅供学习和研究使用
- 请遵守游戏服务条款，合理使用自动化功能
- 过度使用可能导致账号风险
- 建议在单人游戏或允许的环境中使用

### 🔧 技术限制
- 依赖屏幕像素检测，分辨率变化需要重新配置
- 游戏更新可能导致配置失效
- 不支持全屏独占模式的游戏

## 开发说明

### 扩展开发
项目采用模块化设计，易于扩展新功能：
- 新增模块只需在 `Main.ahk` 中包含
- 遵循现有的命名和接口规范
- 使用全局 `App` Map 进行状态管理

### 调试技巧
- 查看 `Logs/` 目录下的日志文件
- 使用测试功能验证技能检测
- 调整容差参数优化检测准确性

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件。

### 许可证摘要

MIT 许可证是一个宽松的开源许可证，允许：
- ✅ 商业使用
- ✅ 修改和分发
- ✅ 私人使用
- ✅ 包含在专有软件中

唯一的要求是保留原始的版权声明和许可证文本。

### 重要提醒

虽然本软件是开源的，但请负责任地使用：
- 遵守游戏服务条款
- 仅在允许的环境中使用自动化功能
- 避免影响其他玩家的游戏体验

## 更新日志

### v0.0.1-Alpha-0.2 (当前版本)
- **UI框架增强**：添加完整的自动化管理页面
- **实时监控**：实现线程、BUFF和规则的摘要页面
- **布局优化**：改进UI布局计算，提升视觉效果
- **动态高度计算**：基于内容增强GroupBox高度计算
- **按钮定位优化**：优化按钮位置，提升用户体验

### v0.0.1-Alpha-0.1
- 初始版本发布
- 基础技能检测功能
- 图形化配置界面
- 规则引擎和BUFF计时器

## 贡献

欢迎提交 Issue 和 Pull Request 来改进项目。

## 支持

如有问题请查看：
1. 检查日志文件中的错误信息
2. 验证技能坐标和颜色配置
3. 确认游戏窗口未被遮挡
4. 调整检测参数优化准确性

---

**English Version**: [README.md](README.md)