# 游戏宏 - AutoHotkey 自动化工具

一个基于 AutoHotkey v2 开发的游戏自动化工具，支持像素检测、技能循环、BUFF计时等高级功能。

## 功能特性

### 🎯 核心功能
- **像素检测**：通过屏幕像素颜色检测技能冷却状态
- **多线程支持**：支持多个独立的技能执行线程
- **智能避让**：鼠标取色时自动避让，避免干扰游戏操作
- **规则引擎**：基于条件的自动化规则系统
- **BUFF计时器**：自动续BUFF功能

### 🛠️ 配置管理
- **多角色配置**：支持多个游戏角色的独立配置
- **可视化编辑**：图形界面配置技能、点位和规则
- **配置导出**：可将配置打包为独立脚本

## 快速开始

### 系统要求
- Windows 操作系统
- AutoHotkey v2.0 或更高版本

### 安装步骤
1. 下载并安装 [AutoHotkey v2](https://www.autohotkey.com/)
2. 克隆或下载本项目到本地
3. 双击运行 `Main.ahk` 启动配置工具

### 基本使用
1. **启动工具**：运行 `Main.ahk` 打开配置界面
2. **创建配置**：点击"新建"创建角色配置
3. **配置技能**：在"技能列表"标签页添加技能
4. **设置热键**：配置开始/停止热键（默认 F9）
5. **保存配置**：点击"保存配置"按钮
6. **开始使用**：在游戏中按热键启动宏

## 详细配置

### 技能配置
每个技能包含以下参数：
- **技能名**：自定义名称
- **键位**：游戏中的技能快捷键
- **坐标**：技能图标在屏幕上的位置
- **颜色**：技能冷却完成时的像素颜色
- **容差**：颜色匹配的容差范围

### 点位配置
独立的取色点位，可用于检测游戏状态：
- **名称**：点位描述
- **坐标**：屏幕坐标
- **颜色**：预期颜色值
- **容差**：颜色匹配容差

### 规则系统
基于条件的自动化规则：
- **条件**：像素检测、计数器等条件判断
- **动作**：执行技能、延迟等操作
- **线程**：指定执行线程
- **优先级**：规则执行优先级

### BUFF计时器
自动续BUFF功能：
- **BUFF名称**：自定义名称
- **持续时间**：BUFF持续时间（毫秒）
- **提前刷新**：提前刷新时间
- **关联技能**：用于续BUFF的技能

## 项目结构

```
game-macro/
├── Main.ahk                    # 主程序入口
├── modules/                    # 功能模块
│   ├── Core.ahk               # 核心功能
│   ├── GUI_Main.ahk           # 主界面
│   ├── GUI_SkillEditor.ahk    # 技能编辑器
│   ├── GUI_PointEditor.ahk    # 点位编辑器
│   ├── GUI_RuleEditor.ahk     # 规则编辑器
│   ├── GUI_BuffEditor.ahk     # BUFF编辑器
│   ├── GUI_Threads.ahk        # 线程管理
│   ├── RuleEngine.ahk         # 规则引擎
│   ├── BuffEngine.ahk         # BUFF引擎
│   ├── WorkerPool.ahk         # 工作线程池
│   ├── Poller.ahk             # 轮询器
│   ├── Pixel.ahk              # 像素检测
│   ├── Storage.ahk            # 配置存储
│   ├── Exporter.ahk           # 配置导出
│   ├── Hotkeys.ahk            # 热键管理
│   ├── Counters.ahk           # 计数器
│   └── Utils.ahk              # 工具函数
├── Profiles/                   # 配置文件目录
│   ├── Default.ini            # 默认配置
│   ├── 夺魂.ini               # 示例配置
│   └── 裁决.ini               # 示例配置
├── Exports/                    # 导出文件目录
│   └── 夺魂/                   # 示例导出配置
└── Logs/                       # 日志文件目录
```

## 使用示例

### 基本技能循环
1. 添加需要循环使用的技能
2. 设置技能检测坐标和颜色
3. 配置轮询间隔（默认25ms）
4. 设置全局延迟防止技能刷屏

### 条件触发规则
1. 创建规则并设置条件
2. 配置条件满足时的动作
3. 设置规则优先级和冷却时间
4. 指定执行线程

### BUFF自动续费
1. 添加BUFF计时器
2. 设置BUFF持续时间和提前刷新时间
3. 关联续BUFF的技能
4. 配置检测条件

## 注意事项

### ⚠️ 重要提醒
- 本工具仅供学习和研究使用
- 请遵守游戏服务条款，合理使用自动化功能
- 过度使用可能导致账号风险
- 建议在单人游戏或允许的环境中使用

### 🔧 技术限制
- 依赖屏幕像素检测，分辨率变化需要重新配置
- 游戏更新可能导致配置失效
- 不支持全屏独占模式的游戏

## 开发说明

### 扩展开发
项目采用模块化设计，易于扩展新功能：
- 新增模块只需在 `Main.ahk` 中包含
- 遵循现有的命名和接口规范
- 使用全局 `App` Map 进行状态管理

### 调试技巧
- 查看 `Logs/` 目录下的日志文件
- 使用测试功能验证技能检测
- 调整容差参数优化检测准确性

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件。

### 许可证摘要

MIT 许可证是一个宽松的开源许可证，允许：
- ✅ 商业使用
- ✅ 修改和分发
- ✅ 私人使用
- ✅ 包含在专有软件中

唯一的要求是保留原始的版权声明和许可证文本。

### 重要提醒

虽然本软件是开源的，但请负责任地使用：
- 遵守游戏服务条款
- 仅在允许的环境中使用自动化功能
- 避免影响其他玩家的游戏体验

## 更新日志

### v0.0.1-Alpha-0.1
- 初始版本发布
- 基础技能检测功能
- 图形化配置界面
- 规则引擎和BUFF计时器

## 贡献

欢迎提交 Issue 和 Pull Request 来改进项目。

## 支持

如有问题请查看：
1. 检查日志文件中的错误信息
2. 验证技能坐标和颜色配置
3. 确认游戏窗口未被遮挡
4. 调整检测参数优化准确性

---

**English Version**: [README.md](README.md)